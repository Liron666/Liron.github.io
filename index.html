<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸“ä¸šæ²Ÿé€šé£æ ¼æµ‹è¯„</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <style>
        :root {
            --primary: #3f51b5;
            --secondary: #ff4081;
            --bg: linear-gradient(135deg, #f8f9fa, #e9ecef);
        }

        body {
            font-family: 'Microsoft Yahei', sans-serif;
            margin: 0;
            padding: 20px;
            background: var(--bg);
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }

        .progress-box {
            margin: 20px 0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .progress-bar {
            height: 20px;
            background: #eee;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            width: 0;
            transition: width 0.5s ease;
        }

        .options {
            display: grid;
            gap: 12px;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }

        .option-btn {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .animal-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            margin: 20px 0;
        }

        #radarChart {
            max-width: 500px;
            margin: 30px auto;
        }

        @media (max-width: 480px) {
            .options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="text-align: center; color: var(--primary);">ğŸ¦ æ²Ÿé€šé£æ ¼æµ‹è¯„ ğŸ¦Š</h1>
        
        <div class="progress-box">
            <div class="progress-header">
                <span>å®Œæˆè¿›åº¦</span>
                <span id="progressText">0/40</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>

        <div id="questionContainer"></div>
        
        <div id="resultContainer" style="display: none;">
            <canvas id="radarChart"></canvas>
            <div id="animalResult"></div>
            <div style="text-align: center; margin-top: 20px;">
                <button onclick="location.reload()" style="padding: 8px 20px;">é‡æ–°æµ‹è¯•</button>
            </div>
        </div>
    </div>

    <script>
        // å®Œæ•´é¢˜ç›®æ•°æ®
        const questions = [
            { id: 1, options: ['A. ç”ŸåŠ¨', 'B. å†’é™©', 'C. å–„äºåˆ†æ', 'D. é€‚åº”æ€§å¼º'] },
            { id: 2, options: ['A. çˆ±å¨±ä¹', 'B. å–„äºè¯´æœ', 'C. åšæŒä¸æ‡ˆ', 'D. å¹³å’Œ'] },
            { id: 3, options: ['A. å–„äºç¤¾äº¤', 'B. æ„å¿—åšå®š', 'C. è‡ªæˆ‘ç‰ºç‰²', 'D. é¡ºä»'] },
            { id: 4, options: ['A. ä½¿äººè®¤åŒ', 'B. ç«äº‰æ€§å¼º', 'C. æœ‰è‡ªåˆ¶åŠ›', 'D. ä½“è´´'] },
            { id: 5, options: ['A. ä½¿äººæŒ¯ä½œ', 'B. å–„äºåº”å˜', 'C. å—å°Šé‡', 'D. å«è“„'] },
            { id: 6, options: ['A. ç”Ÿæ°”å‹ƒå‹ƒ', 'B. è‡ªä¿¡', 'C. è°¨æ…', 'D. æ»¡è¶³'] },
            { id: 7, options: ['A. æ¨åŠ¨è€…', 'B. ç§¯æ', 'C. è®¡åˆ’è€…', 'D. è€å¿ƒ'] },
            { id: 8, options: ['A. æ— æ‹˜æ— æŸ', 'B. è‚¯å®š', 'C. æœ‰æ—¶é—´æ€§', 'D. æ¸©é¡º'] },
            { id: 9, options: ['A. ä¹è§‚', 'B. å¦ç‡', 'C. äº•äº•æœ‰æ¡', 'D. å¥½ç›¸å¤„'] },
            { id: 10, options: ['A. æœ‰è¶£', 'B. å¼ºè¿«æ€§', 'C. éç†æ€§', 'D. å‹å–„'] },
            { id: 11, options: ['A. å‹‡æ•¢', 'B. è‡ªä¿¡', 'C. ç»†èŠ‚', 'D. å¤–äº¤æ‰‹è…•'] },
            { id: 12, options: ['A. ä»¤äººé«˜å…´', 'B. è‡ªä¿¡', 'C. æ–‡åŒ–ä¿®å…»', 'D. æœ‰åŒæƒ…å¿ƒ'] },
            { id: 13, options: ['A. æœ‰æ¿€åŠ±æ€§', 'B. ç‹¬ç«‹', 'C. ä¸€ä¸ä¸è‹Ÿ', 'D. æ— æ”»å‡»æ€§'] },
            { id: 14, options: ['A. æ„Ÿæƒ…å¤–éœ²', 'B. æœæ–­', 'C. æ·±æ²‰', 'D. å¿ è¯š'] },
            { id: 15, options: ['A. çˆ±äº¤æœ‹å‹', 'B. å‘èµ·è€…', 'C. éŸ³ä¹æ€§', 'D. è°ƒèŠ‚è€…'] },
            { id: 16, options: ['A. å¤šè¨€', 'B. æ‰§ç€', 'C. è€ƒè™‘å‘¨åˆ°', 'D. åŒ…å®¹'] },
            { id: 17, options: ['A. æ´»åŠ›å……æ²›', 'B. é¢†å¯¼è€…', 'C. çˆ±æ€è€ƒ', 'D. è†å¬è€…'] },
            { id: 18, options: ['A. æƒ¹äººå–œçˆ±', 'B. é¦–é¢†', 'C. åˆ¶å›¾è€…', 'D. çŸ¥è¶³'] },
            { id: 19, options: ['A. å—æ¬¢è¿', 'B. å‹¤åŠ³', 'C. å®Œç¾ä¸»ä¹‰', 'D. å’Œæ°”'] },
            { id: 20, options: ['A. æ€ç»´è·³è·ƒ', 'B. æ— ç•', 'C. è§„èŒƒ', 'D. å¹³è¡¡'] },
            { id: 21, options: ['A. éœ²éª¨', 'B. ä¸“æ¨ª', 'C. ä¹å‘³', 'D. å¿¸æ€©'] },
            { id: 22, options: ['A. æ•£æ¼«', 'B. å†·é…·', 'C. ä¸çŸ¥å˜é€š', 'D. ç›²ä»'] },
            { id: 23, options: ['A. å” å¨', 'B. é€†å', 'C. æ€¨æ¨', 'D. ä¿ç•™'] },
            { id: 24, options: ['A. å¥å¿˜', 'B. ç›´ç‡', 'C. æŒ‘å‰”', 'D. èƒ†å°'] },
            { id: 25, options: ['A. çˆ±æ’å˜´', 'B. æ€¥èº', 'C. ä¸å®‰', 'D. ä¼˜æŸ”å¯¡æ–­'] },
            { id: 26, options: ['A. éš¾ä»¥é¢„æµ‹', 'B. ç¼ºä¹åŒæƒ…', 'C. ä¸å—æ¬¢è¿', 'D. å§”æ›²æ±‚å…¨'] },
            { id: 27, options: ['A. å³å…´', 'B. å›ºæ‰§', 'C. éš¾ä»¥å–æ‚¦', 'D. çŠ¹è±«ä¸å†³'] },
            { id: 28, options: ['A. æ”¾ä»»', 'B. è‡ªçœ', 'C. æ‚²è§‚', 'D. å¹³æ·¡'] },
            { id: 29, options: ['A. æ˜“æ€’', 'B. äº‰åµ', 'C. è‡ªæ€œ', 'D. æ— ç›®æ ‡'] },
            { id: 30, options: ['A. å¤©çœŸ', 'B. é²è½', 'C. æ¶ˆæ', 'D. è¿å°±'] },
            { id: 31, options: ['A. å–œæ¬¢è®¤åŒ', 'B. å·¥ä½œç‹‚', 'C. ä¸å–„äº¤é™…', 'D. æ‹…å¿§'] },
            { id: 32, options: ['A. å–‹å–‹ä¸ä¼‘', 'B. ä¸åœ†æ»‘', 'C. æ•æ„Ÿ', 'D. èƒ†æ€¯'] },
            { id: 33, options: ['A. ç”Ÿæ´»ç´Šä¹±', 'B. æ®‹å¿', 'C. æŠ‘éƒ', 'D. ç¡çœ '] },
            { id: 34, options: ['A. ç¼ºä¹æ¯…åŠ›', 'B. ä¸å®ˆä¿¡', 'C. å†…å‘', 'D. ç¼ºä¹ä¸»è§'] },
            { id: 35, options: ['A. æ‚ä¹±æ— ç« ', 'B. å–œæ¬¢æ“çºµ', 'C. ä¿å®ˆ', 'D. å–ƒå–ƒè‡ªè¯­'] },
            { id: 36, options: ['A. å¥½è¡¨ç°', 'B. é¡½å›º', 'C. æœ‰æˆ’å¿ƒ', 'D. ç¼“æ…¢'] },
            { id: 37, options: ['A. å¤§å—“é—¨', 'B. æ§åˆ¶æ¬²', 'C. å­¤åƒ»', 'D. æ‡’æƒ°'] },
            { id: 38, options: ['A. ä¸ä¸“æ³¨', 'B. æ­¦æ–­', 'C. å¤šç–‘', 'D. æ‹–å»¶'] },
            { id: 39, options: ['A. çƒ¦èº', 'B. è½»ç‡', 'C. å¹æ¯›æ±‚ç–µ', 'D. å‹‰å¼º'] },
            { id: 40, options: ['A. å–„å˜', 'B. ç‹¡çŒ¾', 'C. å¥½æ‰¹è¯„', 'D. å¦¥å'] }
        ];

        // åŠ¨ç‰©ç±»å‹æè¿°
        const animalDescriptions = {
            A: {
                name: 'å­”é›€: è¡¨ç°å‹',
                image: 'https://cdn.jsdelivr.net/gh/zhengjiaxing/animal-backgrounds@main/peacock.png',
                features: ['çƒ­æƒ…å¼€æ”¾ï¼Œå……æ»¡èƒ½é‡','æ€ç»´æ´»è·ƒï¼Œæƒ³æ³•åˆ›æ–°','å–œæ¬¢ä¸äººä¿æŒäº’åŠ¨','å¸Œæœ›å—äººå…³æ³¨'],
                communication: ['å……æ»¡çƒ­æƒ…å’Œæ„ŸæŸ“åŠ›','å–œæ¬¢å½¢è±¡åŒ–çš„æè¿°','å–œæ¬¢æœ‰æ–°æ„ã€æœ‰äº®ç‚¹'],
                dislikes: ['å•ä¸€çš„å‘ˆç°æ–¹å¼','è¿‡äºç»†èŠ‚çš„æ²Ÿé€š']
            },
            B: {
                name: 'è€è™: æ§åˆ¶å‹',
                image: 'https://cdn.jsdelivr.net/gh/zhengjiaxing/animal-backgrounds@main/tiger.png',
                features: ['éå¸¸è¿›å–ï¼Œåšäº‹é£é£ç«ç«','è¡ŒåŠ¨åŠ›å¼ºï¼Œè¯´å¹²å°±å¹²','å‡¡äº‹è®¾ç«‹ç›®æ ‡ï¼Œå¼ºè°ƒç»“æœ','è®²æ±‚æ•ˆç‡ï¼Œä¸åœ¨ä¹è¿‡ç¨‹'],
                communication: ['ç›´æˆªäº†å½“ï¼Œæœ‰æ•ˆç‡','æœ‰æ˜ç¡®çš„è§‚ç‚¹','å‘ˆç°æ¸…æ™°çš„ç»“æœ'],
                dislikes: ['æµ·é‡ä¿¡æ¯æ— ç»“è®º','å•°å—¦ç»•åœˆå­','è¿‡äºç¢äºäººæƒ…']
            },
            C: {
                name: 'çŒ«å¤´é¹°: åˆ†æå‹',
                image: 'https://cdn.jsdelivr.net/gh/zhengjiaxing/animal-backgrounds@main/owl.png',
                features: ['éå¸¸ç†æ€§ï¼Œå–œæ¬¢æ€è€ƒ','è¯´è¯åšäº‹æœ‰æ¡ç†','ç»†èŠ‚æ§ï¼Œå®Œç¾ä¸»ä¹‰','æœ‰è®¡åˆ’ï¼Œè°¨æ…å°å¿ƒ'],
                communication: ['åŸºäºæ•°æ®å’Œäº‹å®','é€»è¾‘ä¸¥å¯†ï¼Œæ¡ç†æ¸…æ™°','æä¾›å°½å¯èƒ½å¤šçš„ç»†èŠ‚'],
                dislikes: ['åªè°ˆæ„Ÿå—å’Œæ¦‚å¿µ','ç¼ºä¹æ•°æ®å’Œåˆ†æ']
            },
            D: {
                name: 'è€ƒæ‹‰: å‹å–„å‹',
                image: 'https://cdn.jsdelivr.net/gh/zhengjiaxing/animal-backgrounds@main/koala.png',
                features: ['å…³å¿ƒä»–äººï¼Œæœ‰åŒç†å¿ƒ','å®¹æ˜“ç›¸å¤„ï¼Œå¥½è¯´è¯','é»˜é»˜ä»˜å‡ºå’Œæ”¯æŒ','æ³¨é‡å›¢é˜Ÿå’Œè°'],
                communication: ['è½»æ¾å’Œè°çš„æ°›å›´','æ²Ÿé€šæœ‰é“ºå«ï¼Œè¡¨è¾¾å«è“„','å¯¹æ–¹ä¸»å¯¼'],
                dislikes: ['æ²Ÿé€šæ°›å›´å¤ªå†·','åªå…³æ³¨äº‹ä¸å…³æ³¨äºº','æ¿€çƒˆçš„å†²çª']
            }
        };

        let currentQuestion = 0;
        let counts = { A:0, B:0, C:0, D:0 };
        let radarChart = null;

        // åˆå§‹åŒ–æµ‹è¯•
        function initTest() {
            try {
                const saved = localStorage.getItem('communicationTest');
                if(saved) {
                    const data = JSON.parse(saved);
                    currentQuestion = data.current;
                    counts = data.counts;
                    if(currentQuestion >= 40) resetTest();
                }
                renderQuestion();
                updateProgress();
            } catch(e) {
                alert('åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢');
                resetTest();
            }
        }

        // æ¸²æŸ“é¢˜ç›®
        function renderQuestion() {
            const container = document.getElementById('questionContainer');
            const q = questions[currentQuestion];
            
            container.innerHTML = `
                <div class="question-box">
                    <h3>ç¬¬ ${q.id} é¢˜</h3>
                    <p>è¯·é€‰æ‹©æœ€ç¬¦åˆä½ çš„æè¿°ï¼š</p>
                    <div class="options" id="optionsContainer">
                        ${q.options.map((opt, i) => `
                            <button class="option-btn" data-type="${opt[0]}">
                                ${['ğŸ¦š','ğŸ¯','ğŸ¦‰','ğŸ¨'][i]} ${opt}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;

            // äº‹ä»¶å§”æ‰˜ç»‘å®š
            document.getElementById('optionsContainer').addEventListener('click', function(e) {
                const btn = e.target.closest('.option-btn');
                if(btn) handleSelect(btn.dataset.type);
            });
        }

        // å¤„ç†é€‰æ‹©
        function handleSelect(type) {
            counts[type]++;
            currentQuestion++;
            
            if(currentQuestion < 40) {
                saveProgress();
                renderQuestion();
                updateProgress();
            } else {
                showResult();
                localStorage.removeItem('communicationTest');
            }
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult() {
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('resultContainer').style.display = 'block';

            // ç¡®å®šä¸»å¯¼ç±»å‹
            const dominant = Object.entries(counts).sort((a,b) => b[1]-a[1])[0][0];
            const animal = animalDescriptions[dominant];

            // ç»˜åˆ¶é›·è¾¾å›¾
            const ctx = document.getElementById('radarChart').getContext('2d');
            if(radarChart) radarChart.destroy();
            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: Object.values(animalDescriptions).map(a => a.name.split(':')[0]),
                    datasets: [{
                        label: 'å¾—åˆ†åˆ†å¸ƒ',
                        data: Object.values(counts),
                        backgroundColor: 'rgba(63, 81, 181, 0.2)',
                        borderColor: 'rgba(63, 81, 181, 1)'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: Math.max(...Object.values(counts)) + 2
                        }
                    }
                }
            });

            // æ˜¾ç¤ºåŠ¨ç‰©ä¿¡æ¯
            document.getElementById('animalResult').innerHTML = `
                <div class="animal-card">
                    <h2 style="color: var(--primary);">${animal.name}</h2>
                    <img src="${animal.image}" loading="lazy" style="width:200px;height:auto;margin:15px auto;display:block;">
                    <h3>âœ§ ä¸»è¦ç‰¹å¾</h3>
                    <ul>${animal.features.map(f => `<li>${f}</li>`).join('')}</ul>
                    <h3>âœ“ æ¨èæ²Ÿé€šæ–¹å¼</h3>
                    <ul>${animal.communication.map(c => `<li>${c}</li>`).join('')}</ul>
                    <h3>âœ— é¿å…æ²Ÿé€šæ–¹å¼</h3>
                    <ul>${animal.dislikes.map(d => `<li>${d}</li>`).join('')}</ul>
                </div>
            `;
        }

        // è¾…åŠ©å‡½æ•°
        function updateProgress() {
            const progress = (currentQuestion / 40 * 100).toFixed(1);
            document.querySelector('.progress-fill').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `${currentQuestion}/40`;
        }

        function saveProgress() {
            localStorage.setItem('communicationTest', JSON.stringify({
                current: currentQuestion,
                counts: counts
            }));
        }

        function resetTest() {
            currentQuestion = 0;
            counts = { A:0, B:0, C:0, D:0 };
            localStorage.removeItem('communicationTest');
        }

        // å¯åŠ¨æµ‹è¯•
        document.addEventListener('DOMContentLoaded', initTest);
    </script>
</body>
</html>
